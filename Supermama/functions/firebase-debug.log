[debug] [2022-03-02T14:01:35.110Z] ----------------------------------------------------------------------
[debug] [2022-03-02T14:01:35.111Z] Command:       /usr/local/bin/node /Users/waiyi/.yarn/bin/firebase functions:shell
[debug] [2022-03-02T14:01:35.111Z] CLI Version:   10.2.1
[debug] [2022-03-02T14:01:35.112Z] Platform:      darwin
[debug] [2022-03-02T14:01:35.112Z] Node Version:  v16.14.0
[debug] [2022-03-02T14:01:35.119Z] Time:          Wed Mar 02 2022 22:01:35 GMT+0800 (Malaysia Time)
[debug] [2022-03-02T14:01:35.119Z] ----------------------------------------------------------------------
[debug] 
[debug] [2022-03-02T14:01:35.146Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2022-03-02T14:01:35.146Z] > authorizing via signed-in user (waiyi2000@gmail.com)
[debug] [2022-03-02T14:01:35.146Z] [iam] checking project supermama-6aa87 for permissions ["firebase.projects.get"]
[debug] [2022-03-02T14:01:35.147Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/supermama-6aa87:testIamPermissions [none]
[debug] [2022-03-02T14:01:35.147Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/supermama-6aa87:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2022-03-02T14:01:36.272Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/supermama-6aa87:testIamPermissions 200
[debug] [2022-03-02T14:01:36.272Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/supermama-6aa87:testIamPermissions {"permissions":["firebase.projects.get"]}
[debug] [2022-03-02T14:01:36.295Z] [functions] Using node@16 from host.
[debug] [2022-03-02T14:01:36.296Z] defaultcredentials: writing to file /Users/waiyi/.config/firebase/waiyi2000_gmail_com_application_default_credentials.json
[debug] [2022-03-02T14:01:36.298Z] DEBUG: Setting GAC to /Users/waiyi/.config/firebase/waiyi2000_gmail_com_application_default_credentials.json
[debug] [2022-03-02T14:01:36.298Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/supermama-6aa87/adminSdkConfig [none]
[debug] [2022-03-02T14:01:36.724Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/supermama-6aa87/adminSdkConfig 200
[debug] [2022-03-02T14:01:36.725Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/supermama-6aa87/adminSdkConfig {"projectId":"supermama-6aa87","storageBucket":"supermama-6aa87.appspot.com","locationId":"asia-southeast1"}
[debug] [2022-03-02T14:01:36.760Z] [functions] Watching "/Users/waiyi/Documents/Supermama/Supermama/functions" for Cloud Functions...
[debug] [2022-03-02T14:01:36.767Z] Validating nodejs source
[debug] [2022-03-02T14:01:37.530Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "yarn shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^9.8.0",
    "firebase-functions": "^3.14.1",
    "stripe": "^8.206.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-03-02T14:01:37.530Z] Building nodejs source
[debug] [2022-03-02T14:01:37.530Z] Analyzing nodejs backend spec
[debug] [2022-03-02T14:01:37.629Z] [functions[us-central1-completePaymentWithStripe]] http function initialized (http://localhost:5001/supermama-6aa87/us-central1/completePaymentWithStripe).
[info] i  functions: Loaded functions: completePaymentWithStripe 
[warn] âš   functions: The following emulators are not running, calls to these services will affect production: firestore, database, pubsub, storage 
[debug] [2022-03-02T14:02:06.534Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-03-02T14:02:06.535Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-03-02T14:02:06.536Z] Accepted request POST /supermama-6aa87/us-central1/completePaymentWithStripe --> us-central1-completePaymentWithStripe
[debug] [2022-03-02T14:02:06.548Z] DEBUG: [worker-pool] addWorker(us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:02:06.548Z] DEBUG: [worker-pool] Adding worker with key us-central1-completePaymentWithStripe, total=1
[debug] [2022-03-02T14:02:06.548Z] DEBUG: [worker-pool] submitWork(triggerId=us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:02:06.549Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: Assigning socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:02:06.549Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: BUSY
[debug] [2022-03-02T14:02:07.051Z] DEBUG: [runtime-status] [98985] Functions runtime initialized. {"cwd":"/Users/waiyi/Documents/Supermama/Supermama/functions","node_version":"16.14.0"}
[debug] [2022-03-02T14:02:07.051Z] DEBUG: [runtime-status] [98985] Disabled runtime features: undefined
[debug] [2022-03-02T14:02:07.052Z] DEBUG: [runtime-status] [98985] Resolved module firebase-admin {"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2022-03-02T14:02:07.053Z] DEBUG: [runtime-status] [98985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:02:07.053Z] DEBUG: [runtime-status] [98985] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}]
[debug] [2022-03-02T14:02:07.053Z] DEBUG: [runtime-status] [98985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:02:07.073Z] DEBUG: [runtime-status] [98985] Checked functions.config() {"config":{}}
[debug] [2022-03-02T14:02:07.073Z] DEBUG: [runtime-status] [98985] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}}
[debug] [2022-03-02T14:02:07.074Z] DEBUG: [runtime-status] [98985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:02:07.074Z] DEBUG: [runtime-status] [98985] Resolved module firebase-admin {"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2022-03-02T14:02:07.074Z] DEBUG: [runtime-status] [98985] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:02:07.074Z] DEBUG: [runtime-status] [98985] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}}
[debug] [2022-03-02T14:02:07.100Z] DEBUG: [runtime-status] [98985] Beginning invocation function completePaymentWithStripe!
[debug] [2022-03-02T14:02:07.101Z] [functions] Beginning execution of "completePaymentWithStripe"
[debug] [2022-03-02T14:02:07.101Z] DEBUG: [runtime-status] [98985] Running completePaymentWithStripe in signature http
[debug] [2022-03-02T14:02:07.102Z] DEBUG: [runtime-status] [98985] Attempting to listen to socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:02:07.110Z] DEBUG: [functions] Runtime ready! Sending request!
[debug] [2022-03-02T14:02:07.111Z] DEBUG: [functions] Got req.url=/supermama-6aa87/us-central1/completePaymentWithStripe, mapping to path=/
[debug] [2022-03-02T14:02:07.117Z] DEBUG: [runtime-status] [98985] Ephemeral server handling POST request
[debug] [2022-03-02T14:02:07.122Z] DEBUG: [runtime-status] [98985] Ephemeral server survived.
[info] >  StripeInvalidRequestError: No such token: 'weadsadf' {"user":"StripeInvalidRequestError: No such token: 'weadsadf'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: No such token: 'weadsadf'"}}
[info] >      at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16) {"user":"    at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16)"}}
[info] >      at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35) {"user":"    at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35)"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'resource_missing', {"user":"    code: 'resource_missing',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     code: 'resource_missing',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/resource-missing', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/resource-missing',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/resource-missing',"}}
[info] >      message: "No such token: 'weadsadf'", {"user":"    message: \"No such token: 'weadsadf'\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     message: \"No such token: 'weadsadf'\","}}
[info] >      param: 'source', {"user":"    param: 'source',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     param: 'source',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Wed, 02 Mar 2022 14:02:07 GMT', {"user":"      date: 'Wed, 02 Mar 2022 14:02:07 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       date: 'Wed, 02 Mar 2022 14:02:07 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '227', {"user":"      'content-length': '227',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'content-length': '227',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f', {"user":"      'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f',"}}
[info] >        'original-request': 'req_QK4DRWSNjeNts8', {"user":"      'original-request': 'req_QK4DRWSNjeNts8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_QK4DRWSNjeNts8',"}}
[info] >        'request-id': 'req_QK4DRWSNjeNts8', {"user":"      'request-id': 'req_QK4DRWSNjeNts8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_QK4DRWSNjeNts8',"}}
[info] >        'stripe-version': '2020-08-27', {"user":"      'stripe-version': '2020-08-27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2020-08-27',"}}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_QK4DRWSNjeNts8' {"user":"    requestId: 'req_QK4DRWSNjeNts8'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     requestId: 'req_QK4DRWSNjeNts8'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'resource_missing', {"user":"  code: 'resource_missing',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   code: 'resource_missing',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/resource-missing', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/resource-missing',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/resource-missing',"}}
[info] >    param: 'source', {"user":"  param: 'source',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   param: 'source',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Wed, 02 Mar 2022 14:02:07 GMT', {"user":"    date: 'Wed, 02 Mar 2022 14:02:07 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     date: 'Wed, 02 Mar 2022 14:02:07 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '227', {"user":"    'content-length': '227',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'content-length': '227',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f', {"user":"    'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'c19c5eaa-a820-4f75-ad13-2b6e41fca35f',"}}
[info] >      'original-request': 'req_QK4DRWSNjeNts8', {"user":"    'original-request': 'req_QK4DRWSNjeNts8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_QK4DRWSNjeNts8',"}}
[info] >      'request-id': 'req_QK4DRWSNjeNts8', {"user":"    'request-id': 'req_QK4DRWSNjeNts8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_QK4DRWSNjeNts8',"}}
[info] >      'stripe-version': '2020-08-27', {"user":"    'stripe-version': '2020-08-27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2020-08-27',"}}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_QK4DRWSNjeNts8', {"user":"  requestId: 'req_QK4DRWSNjeNts8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   requestId: 'req_QK4DRWSNjeNts8',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    payment_method_type: undefined, {"user":"  payment_method_type: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_method_type: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2022-03-02T14:02:07.635Z] [functions] Finished "completePaymentWithStripe" in ~1s
[debug] [2022-03-02T14:02:07.635Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: IDLE
[debug] [2022-03-02T14:02:07.635Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-03-02T14:02:46.949Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-03-02T14:02:46.954Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-03-02T14:02:46.954Z] Accepted request POST /supermama-6aa87/us-central1/completePaymentWithStripe --> us-central1-completePaymentWithStripe
[debug] [2022-03-02T14:02:46.954Z] DEBUG: [worker-pool] submitWork(triggerId=us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:02:46.955Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: Assigning socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:02:46.955Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: BUSY
[debug] [2022-03-02T14:02:46.959Z] DEBUG: [runtime-status] [98985] Beginning invocation function completePaymentWithStripe!
[debug] [2022-03-02T14:02:46.959Z] [functions] Beginning execution of "completePaymentWithStripe"
[debug] [2022-03-02T14:02:46.959Z] DEBUG: [runtime-status] [98985] Running completePaymentWithStripe in signature http
[debug] [2022-03-02T14:02:46.966Z] DEBUG: [runtime-status] [98985] Attempting to listen to socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:02:46.974Z] DEBUG: [functions] Runtime ready! Sending request!
[debug] [2022-03-02T14:02:46.975Z] DEBUG: [functions] Got req.url=/supermama-6aa87/us-central1/completePaymentWithStripe, mapping to path=/
[debug] [2022-03-02T14:02:46.979Z] DEBUG: [runtime-status] [98985] Ephemeral server handling POST request
[debug] [2022-03-02T14:02:46.981Z] DEBUG: [runtime-status] [98985] Ephemeral server survived.
[debug] [2022-03-02T14:02:48.220Z] [functions] Finished "completePaymentWithStripe" in ~1s
[debug] [2022-03-02T14:02:48.220Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: IDLE
[debug] [2022-03-02T14:02:48.220Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-03-02T14:05:04.830Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-03-02T14:05:04.831Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-03-02T14:05:04.831Z] Accepted request POST /supermama-6aa87/us-central1/completePaymentWithStripe --> us-central1-completePaymentWithStripe
[debug] [2022-03-02T14:05:04.831Z] DEBUG: [worker-pool] submitWork(triggerId=us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:05:04.831Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: Assigning socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:05:04.831Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: BUSY
[debug] [2022-03-02T14:05:04.834Z] DEBUG: [runtime-status] [98985] Beginning invocation function completePaymentWithStripe!
[debug] [2022-03-02T14:05:04.834Z] [functions] Beginning execution of "completePaymentWithStripe"
[debug] [2022-03-02T14:05:04.834Z] DEBUG: [runtime-status] [98985] Running completePaymentWithStripe in signature http
[debug] [2022-03-02T14:05:04.835Z] DEBUG: [runtime-status] [98985] Attempting to listen to socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:05:04.837Z] DEBUG: [functions] Runtime ready! Sending request!
[debug] [2022-03-02T14:05:04.837Z] DEBUG: [functions] Got req.url=/supermama-6aa87/us-central1/completePaymentWithStripe, mapping to path=/
[debug] [2022-03-02T14:05:04.839Z] DEBUG: [runtime-status] [98985] Ephemeral server handling POST request
[debug] [2022-03-02T14:05:04.840Z] DEBUG: [runtime-status] [98985] Ephemeral server survived.
[info] >  StripeInvalidRequestError: Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs' {"user":"StripeInvalidRequestError: Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs'"}}
[info] >      at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16) {"user":"    at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at Function.generate (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/Error.js:40:16)"}}
[info] >      at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35) {"user":"    at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at res.toJSON.then.StripeAPIError.message (/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/stripe/lib/StripeResource.js:220:35)"}}
[info] >      at processTicksAndRejections (node:internal/process/task_queues:96:5) { {"user":"    at processTicksAndRejections (node:internal/process/task_queues:96:5) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     at processTicksAndRejections (node:internal/process/task_queues:96:5) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      message: "Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs'", {"user":"    message: \"Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs'\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     message: \"Invalid source object: must be a dictionary or a non-empty string. See API docs at https://stripe.com/docs'\","}}
[info] >      param: 'source', {"user":"    param: 'source',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     param: 'source',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Wed, 02 Mar 2022 14:05:05 GMT', {"user":"      date: 'Wed, 02 Mar 2022 14:05:05 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       date: 'Wed, 02 Mar 2022 14:05:05 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '206', {"user":"      'content-length': '206',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'content-length': '206',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc', {"user":"      'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc',"}}
[info] >        'original-request': 'req_xZtd0ArYR2RTJ5', {"user":"      'original-request': 'req_xZtd0ArYR2RTJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_xZtd0ArYR2RTJ5',"}}
[info] >        'request-id': 'req_xZtd0ArYR2RTJ5', {"user":"      'request-id': 'req_xZtd0ArYR2RTJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_xZtd0ArYR2RTJ5',"}}
[info] >        'stripe-version': '2020-08-27', {"user":"      'stripe-version': '2020-08-27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2020-08-27',"}}
[info] >        'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_xZtd0ArYR2RTJ5' {"user":"    requestId: 'req_xZtd0ArYR2RTJ5'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     requestId: 'req_xZtd0ArYR2RTJ5'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: undefined, {"user":"  code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   code: undefined,"}}
[info] >    doc_url: undefined, {"user":"  doc_url: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   doc_url: undefined,"}}
[info] >    param: 'source', {"user":"  param: 'source',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   param: 'source',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Wed, 02 Mar 2022 14:05:05 GMT', {"user":"    date: 'Wed, 02 Mar 2022 14:05:05 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     date: 'Wed, 02 Mar 2022 14:05:05 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '206', {"user":"    'content-length': '206',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'content-length': '206',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE', {"user":"    'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, POST, HEAD, OPTIONS, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc', {"user":"    'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '4202b8a5-4fba-40f2-a2ac-412be90636bc',"}}
[info] >      'original-request': 'req_xZtd0ArYR2RTJ5', {"user":"    'original-request': 'req_xZtd0ArYR2RTJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_xZtd0ArYR2RTJ5',"}}
[info] >      'request-id': 'req_xZtd0ArYR2RTJ5', {"user":"    'request-id': 'req_xZtd0ArYR2RTJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_xZtd0ArYR2RTJ5',"}}
[info] >      'stripe-version': '2020-08-27', {"user":"    'stripe-version': '2020-08-27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2020-08-27',"}}
[info] >      'strict-transport-security': 'max-age=31556926; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=31556926; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_xZtd0ArYR2RTJ5', {"user":"  requestId: 'req_xZtd0ArYR2RTJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   requestId: 'req_xZtd0ArYR2RTJ5',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    payment_method_type: undefined, {"user":"  payment_method_type: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   payment_method_type: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-completePaymentWithStripe"},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2022-03-02T14:05:05.183Z] [functions] Finished "completePaymentWithStripe" in ~1s
[debug] [2022-03-02T14:05:05.183Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: IDLE
[debug] [2022-03-02T14:05:05.184Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-03-02T14:07:57.934Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-03-02T14:07:57.934Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-03-02T14:07:57.934Z] Accepted request POST /supermama-6aa87/us-central1/completePaymentWithStripe --> us-central1-completePaymentWithStripe
[debug] [2022-03-02T14:07:57.935Z] DEBUG: [worker-pool] submitWork(triggerId=us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:07:57.935Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: Assigning socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:07:57.935Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: BUSY
[debug] [2022-03-02T14:07:57.940Z] DEBUG: [runtime-status] [98985] Beginning invocation function completePaymentWithStripe!
[debug] [2022-03-02T14:07:57.941Z] [functions] Beginning execution of "completePaymentWithStripe"
[debug] [2022-03-02T14:07:57.950Z] DEBUG: [runtime-status] [98985] Running completePaymentWithStripe in signature http
[debug] [2022-03-02T14:07:57.950Z] DEBUG: [runtime-status] [98985] Attempting to listen to socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_98985.sock
[debug] [2022-03-02T14:07:57.952Z] DEBUG: [functions] Runtime ready! Sending request!
[debug] [2022-03-02T14:07:57.952Z] DEBUG: [functions] Got req.url=/supermama-6aa87/us-central1/completePaymentWithStripe, mapping to path=/
[debug] [2022-03-02T14:07:57.955Z] DEBUG: [runtime-status] [98985] Ephemeral server handling POST request
[debug] [2022-03-02T14:07:57.958Z] DEBUG: [runtime-status] [98985] Ephemeral server survived.
[debug] [2022-03-02T14:07:59.088Z] [functions] Finished "completePaymentWithStripe" in ~1s
[debug] [2022-03-02T14:07:59.088Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: IDLE
[debug] [2022-03-02T14:07:59.096Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-03-02T14:17:02.586Z] DEBUG: File /Users/waiyi/Documents/Supermama/Supermama/functions/index.js changed, reloading triggers
[debug] [2022-03-02T14:17:03.597Z] DEBUG: [worker-pool] Shutting down IDLE worker (us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:17:03.597Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: FINISHING
[debug] [2022-03-02T14:17:03.610Z] Validating nodejs source
[debug] [2022-03-02T14:17:05.398Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "yarn shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^9.8.0",
    "firebase-functions": "^3.14.1",
    "stripe": "^8.206.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-03-02T14:17:05.399Z] Building nodejs source
[debug] [2022-03-02T14:17:05.399Z] Analyzing nodejs backend spec
[debug] [2022-03-02T14:17:05.404Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: exited
[debug] [2022-03-02T14:17:05.404Z] DEBUG: [worker-us-central1-completePaymentWithStripe-1577e1a8-dd34-44b6-b400-616e18c1c19d]: FINISHED
[debug] [2022-03-02T14:17:06.536Z] DEBUG: File /Users/waiyi/Documents/Supermama/Supermama/functions/index.js changed, reloading triggers
[debug] [2022-03-02T14:17:07.541Z] Validating nodejs source
[debug] [2022-03-02T14:17:08.178Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "yarn shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^9.8.0",
    "firebase-functions": "^3.14.1",
    "stripe": "^8.206.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-03-02T14:17:08.179Z] Building nodejs source
[debug] [2022-03-02T14:17:08.179Z] Analyzing nodejs backend spec
[debug] [2022-03-02T14:17:36.706Z] [work-queue] {"queueLength":1,"workRunningCount":0}
[debug] [2022-03-02T14:17:36.706Z] [work-queue] {"queueLength":0,"workRunningCount":1}
[debug] [2022-03-02T14:17:36.707Z] Accepted request POST /supermama-6aa87/us-central1/completePaymentWithStripe --> us-central1-completePaymentWithStripe
[debug] [2022-03-02T14:17:36.707Z] DEBUG: [worker-pool] Cleaned up workers for us-central1-completePaymentWithStripe: 1 --> 0
[debug] [2022-03-02T14:17:36.714Z] DEBUG: [worker-pool] addWorker(us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:17:36.714Z] DEBUG: [worker-pool] Adding worker with key us-central1-completePaymentWithStripe, total=1
[debug] [2022-03-02T14:17:36.714Z] DEBUG: [worker-pool] submitWork(triggerId=us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:17:36.714Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: Assigning socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_99274.sock
[debug] [2022-03-02T14:17:36.714Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: BUSY
[debug] [2022-03-02T14:17:37.184Z] DEBUG: [runtime-status] [99274] Functions runtime initialized. {"cwd":"/Users/waiyi/Documents/Supermama/Supermama/functions","node_version":"16.14.0"}
[debug] [2022-03-02T14:17:37.185Z] DEBUG: [runtime-status] [99274] Disabled runtime features: undefined
[debug] [2022-03-02T14:17:37.186Z] DEBUG: [runtime-status] [99274] Resolved module firebase-admin {"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2022-03-02T14:17:37.186Z] DEBUG: [runtime-status] [99274] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:17:37.186Z] DEBUG: [runtime-status] [99274] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}]
[debug] [2022-03-02T14:17:37.186Z] DEBUG: [runtime-status] [99274] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:17:37.204Z] DEBUG: [runtime-status] [99274] Checked functions.config() {"config":{}}
[debug] [2022-03-02T14:17:37.204Z] DEBUG: [runtime-status] [99274] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}}
[debug] [2022-03-02T14:17:37.204Z] DEBUG: [runtime-status] [99274] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:17:37.204Z] DEBUG: [runtime-status] [99274] Resolved module firebase-admin {"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}
[debug] [2022-03-02T14:17:37.205Z] DEBUG: [runtime-status] [99274] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.18.1","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-functions/lib/index.js"}
[debug] [2022-03-02T14:17:37.205Z] DEBUG: [runtime-status] [99274] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"9.12.0","resolution":"/Users/waiyi/Documents/Supermama/Supermama/functions/node_modules/firebase-admin/lib/index.js"}}
[debug] [2022-03-02T14:17:37.225Z] DEBUG: [runtime-status] [99274] Beginning invocation function completePaymentWithStripe!
[debug] [2022-03-02T14:17:37.227Z] [functions] Beginning execution of "completePaymentWithStripe"
[debug] [2022-03-02T14:17:37.227Z] DEBUG: [runtime-status] [99274] Running completePaymentWithStripe in signature http
[debug] [2022-03-02T14:17:37.227Z] DEBUG: [runtime-status] [99274] Attempting to listen to socketPath: /var/folders/fh/q0jk3n697bd176799gvy7wdw0000gn/T/fire_emu_99274.sock
[debug] [2022-03-02T14:17:37.231Z] DEBUG: [functions] Runtime ready! Sending request!
[debug] [2022-03-02T14:17:37.231Z] DEBUG: [functions] Got req.url=/supermama-6aa87/us-central1/completePaymentWithStripe, mapping to path=/
[debug] [2022-03-02T14:17:37.238Z] DEBUG: [runtime-status] [99274] Ephemeral server handling POST request
[debug] [2022-03-02T14:17:37.242Z] DEBUG: [runtime-status] [99274] Ephemeral server survived.
[debug] [2022-03-02T14:17:38.429Z] [functions] Finished "completePaymentWithStripe" in ~1s
[debug] [2022-03-02T14:17:38.429Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: IDLE
[debug] [2022-03-02T14:17:38.429Z] [work-queue] {"queueLength":0,"workRunningCount":0}
[debug] [2022-03-02T14:18:14.406Z] DEBUG: File /Users/waiyi/Documents/Supermama/Supermama/functions/index.js changed, reloading triggers
[debug] [2022-03-02T14:18:15.409Z] DEBUG: [worker-pool] Shutting down IDLE worker (us-central1-completePaymentWithStripe)
[debug] [2022-03-02T14:18:15.409Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: FINISHING
[debug] [2022-03-02T14:18:15.413Z] Validating nodejs source
[debug] [2022-03-02T14:18:16.188Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "yarn shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^9.8.0",
    "firebase-functions": "^3.14.1",
    "stripe": "^8.206.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-03-02T14:18:16.189Z] Building nodejs source
[debug] [2022-03-02T14:18:16.189Z] Analyzing nodejs backend spec
[debug] [2022-03-02T14:18:16.192Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: exited
[debug] [2022-03-02T14:18:16.192Z] DEBUG: [worker-us-central1-completePaymentWithStripe-c1c2dae1-9b55-42b5-927a-2ad3e656ed51]: FINISHED
[debug] [2022-03-02T14:18:40.203Z] DEBUG: File /Users/waiyi/Documents/Supermama/Supermama/functions/index.js changed, reloading triggers
[debug] [2022-03-02T14:18:41.212Z] Validating nodejs source
[debug] [2022-03-02T14:18:41.913Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "yarn shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "16"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^9.8.0",
    "firebase-functions": "^3.14.1",
    "stripe": "^8.206.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2022-03-02T14:18:41.913Z] Building nodejs source
[debug] [2022-03-02T14:18:41.914Z] Analyzing nodejs backend spec
